# 20171022工作总结

## 硬解码视频测试

### GPU

* `gtx960m `解码视频（1920 * 1280 -- 720P）为  `490-500fps`, `2ms`
* `gtx960m `解码视频（3392 * 2016 -- 4K）为  `169fps`, `5.9ms`
* `gtx1080`解码视频（3392 * 2016 -- 4K）为 `250fps`, `4ms`,`6ms`(YUV-GBR)
* `titan xp`解码视频（3392 * 2016 -- 4K）为`7ms`(YUV-BGR)

### 集成显卡

* 核显（老师笔记本`i5-7200U`）解码视频（3392 * 2016 -- 4K）为`150-180fps`，CPU占用率20%

***

## 各神经网络检测速度

* SSD(vgg16)-tf：gtx1080 50fps
* pva-net-compress：gtx1080 15fps
* movile-net：gtx1080 50fps       cpu 0.14s/frame    7fps
* 同时多路视频检测：将多路视频检测区域合成为一张图，实现多路视频变相并行计算（已测明 9路可行）  **需要专项训练小目标检测，增加计算路数**

***

## 背景建模、车辆、车牌、行人检测

* 车辆：高斯背景建模(阴影剔除)(opencv-mog2)  尾灯用于提取车辆准确轮廓（去除阴影）
* 车牌：只检测蓝车牌。 遍历像素根据b通道建立联通区，腐蚀膨胀，寻找边缘外包矩形，宽高比选出车牌，根据字符个数剔除误检
* 行人：根据ROI筛选行人框，根据宽高比、面积进一步筛选，计算速度向量，保留横向行走的

***

## 视频硬解码

* opencv自带**cuvid**GPU硬解码，而且**可以通过rtsp(视频流IP地址)传入视频流**（此方法还未尝试）

* ffmpeg+navid_codec_sdk(英伟达官方DEMO)，**主要问题在于英伟达官网DEMO不提供视频流输入**，导致从底层更改接口，失败

* 现采用硬解码方法：可直接转码为cv::Mat

  [ffmpeg(cuvid)+opencv]: https://github.com/chinahbcq/ffmpeg_hw_decode.git

